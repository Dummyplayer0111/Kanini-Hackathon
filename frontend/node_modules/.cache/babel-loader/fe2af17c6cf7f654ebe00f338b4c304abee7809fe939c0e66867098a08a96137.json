{"ast":null,"code":"import _objectSpread from\"C:/Users/Praanesh MB/OneDrive/Documents/Kanini-Hackathon-master/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./NurseDashboard.css\";import\"./EmergencyCases.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function getCookie(name){let cookieValue=null;if(document.cookie&&document.cookie!==\"\"){const cookies=document.cookie.split(\";\");for(let cookie of cookies){cookie=cookie.trim();if(cookie.startsWith(name+\"=\")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}const DEPARTMENTS=[\"Emergency\",\"General_Medicine\",\"Cardiology\",\"Neurology\",\"Pulmonology\",\"Gastroenterology\",\"Orthopedics\",\"Pediatrics\",\"Nephrology\",\"Endocrinology\"];const EMPTY_PATIENT={full_name:\"\",age:\"\",gender:\"\",blood_group:\"\",allergies:\"\",past_surgeries:\"\",diabetes:false,hypertension:false,heart_disease:false,asthma:false,chronic_kidney_disease:false,previous_stroke:false,smoker:false,obese:false,previous_heart_attack:false,previous_hospitalization:false};function EmergencyCases(){const[nurseName,setNurseName]=useState(\"\");const navigate=useNavigate();// Patient states\nconst[patientType,setPatientType]=useState(\"existing\");const[searchQuery,setSearchQuery]=useState(\"\");const[searchResults,setSearchResults]=useState([]);const[selectedPatient,setSelectedPatient]=useState(null);const[newPatient,setNewPatient]=useState(_objectSpread({},EMPTY_PATIENT));const[saving,setSaving]=useState(false);// Input mode: \"voice\" | \"manual\"\nconst[inputMode,setInputMode]=useState(null);// Symptoms text (shared between voice and manual)\nconst[transcript,setTranscript]=useState(\"\");// Voice states\nconst[isListening,setIsListening]=useState(false);const[mediaRecorder,setMediaRecorder]=useState(null);const[translating,setTranslating]=useState(false);// Triage states\nconst[triageResult,setTriageResult]=useState(null);const[triageLoading,setTriageLoading]=useState(false);// Confirmation states\nconst[chosenDepartment,setChosenDepartment]=useState(\"\");const[overrideMode,setOverrideMode]=useState(false);const[doctors,setDoctors]=useState([]);const[selectedDoctor,setSelectedDoctor]=useState(null);const[confirming,setConfirming]=useState(false);const[confirmed,setConfirmed]=useState(null);// Error state (replaces alert())\nconst[errorMsg,setErrorMsg]=useState(\"\");useEffect(()=>{fetch(\"http://localhost:8000/api/user-role/\",{credentials:\"include\"}).then(res=>{if(!res.ok){navigate(\"/\");return null;}return res.json();}).then(roleData=>{if(!roleData)return;if(roleData.role!==\"nurse\"){navigate(\"/\");return;}setNurseName(roleData.name||\"\");});},[navigate]);const handleLogout=async()=>{const csrfToken=getCookie(\"csrftoken\");await fetch(\"http://localhost:8000/api/logout/\",{method:\"POST\",credentials:\"include\",headers:{\"X-CSRFToken\":csrfToken}});navigate(\"/\");};// ---------- Patient Search ----------\nuseEffect(()=>{if(patientType!==\"existing\"||searchQuery.trim().length<2){setSearchResults([]);return;}const timer=setTimeout(()=>{fetch(\"http://localhost:8000/api/patient/search/?q=\".concat(encodeURIComponent(searchQuery)),{credentials:\"include\"}).then(res=>res.json()).then(data=>{if(Array.isArray(data))setSearchResults(data);}).catch(()=>{});},300);return()=>clearTimeout(timer);},[searchQuery,patientType]);const selectPatient=patient=>{setSelectedPatient(patient);setSearchQuery(\"\");setSearchResults([]);};// ---------- New Patient ----------\nconst handleNewPatientChange=(field,value)=>{setNewPatient(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const handleCreatePatient=async()=>{if(!newPatient.full_name.trim()||!newPatient.age||!newPatient.gender){setErrorMsg(\"Name, age, and gender are required.\");return;}setSaving(true);setErrorMsg(\"\");try{const csrfToken=getCookie(\"csrftoken\");const res=await fetch(\"http://localhost:8000/api/patient/create/\",{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\",\"X-CSRFToken\":csrfToken},body:JSON.stringify(newPatient)});const result=await res.json();if(res.ok){setSelectedPatient(_objectSpread(_objectSpread({},newPatient),{},{id:result.id}));setNewPatient(_objectSpread({},EMPTY_PATIENT));}else{setErrorMsg(result.error||\"Failed to create patient.\");}}catch(_unused){setErrorMsg(\"Error connecting to server.\");}setSaving(false);};// ---------- Voice Recording ----------\nconst startListening=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({audio:true});const recorder=new MediaRecorder(stream);setMediaRecorder(recorder);const chunks=[];recorder.ondataavailable=e=>{if(e.data.size>0)chunks.push(e.data);};recorder.onstop=async()=>{const audioBlob=new Blob(chunks,{type:\"audio/webm\"});const formData=new FormData();formData.append(\"audio\",audioBlob,\"recording.webm\");setTranslating(true);try{const response=await fetch(\"http://localhost:8000/api/whisper/\",{method:\"POST\",credentials:\"include\",body:formData});const data=await response.json();if(data.translated_text){setTranscript(data.translated_text);}else{setErrorMsg(data.error||\"Transcription failed. Try recording again.\");}}catch(_unused2){setErrorMsg(\"Error sending audio to server.\");}setTranslating(false);};recorder.start();setIsListening(true);}catch(_unused3){setErrorMsg(\"Microphone access denied.\");}};const stopListening=()=>{if(mediaRecorder){mediaRecorder.stop();setIsListening(false);}};// ---------- Triage Submit ----------\nconst handleTriageSubmit=async()=>{if(!transcript.trim())return;setTriageLoading(true);setTriageResult(null);try{const csrfToken=getCookie(\"csrftoken\");const res=await fetch(\"http://localhost:8000/api/triage/\",{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\",\"X-CSRFToken\":csrfToken},body:JSON.stringify({symptoms:transcript})});const result=await res.json();setTriageResult(result);}catch(_unused4){setTriageResult({error:\"Failed to reach server.\"});}setTriageLoading(false);};const clearAll=()=>{setTranscript(\"\");setTriageResult(null);setChosenDepartment(\"\");setOverrideMode(false);setDoctors([]);setSelectedDoctor(null);setConfirmed(null);setErrorMsg(\"\");};// ---------- Fetch doctors ----------\nuseEffect(()=>{if(!chosenDepartment){setDoctors([]);setSelectedDoctor(null);return;}fetch(\"http://localhost:8000/api/doctors/?department=\".concat(encodeURIComponent(chosenDepartment)),{credentials:\"include\"}).then(res=>res.json()).then(data=>{if(Array.isArray(data)){setDoctors(data);// Auto-select least-loaded doctor (API returns sorted by patient_count)\nif(!overrideMode&&data.length>0){setSelectedDoctor(data[0]);}}}).catch(()=>{});},[chosenDepartment,overrideMode]);useEffect(()=>{if(triageResult&&!triageResult.error&&triageResult.assigned_department){setChosenDepartment(triageResult.assigned_department);setOverrideMode(false);setConfirmed(null);}},[triageResult]);// ---------- Confirm Assignment ----------\nconst handleConfirm=async()=>{if(!selectedDoctor||!chosenDepartment||!selectedPatient)return;setConfirming(true);setErrorMsg(\"\");try{const csrfToken=getCookie(\"csrftoken\");const res=await fetch(\"http://localhost:8000/api/emergency/confirm/\",{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\",\"X-CSRFToken\":csrfToken},body:JSON.stringify({patient_id:selectedPatient.id,doctor_id:selectedDoctor.id,department:chosenDepartment,symptoms:transcript})});const result=await res.json();if(res.ok){setConfirmed(result);}else{setErrorMsg(result.error||\"Failed to confirm.\");}}catch(_unused5){setErrorMsg(\"Error connecting to server.\");}setConfirming(false);};// ---------- Render helpers ----------\nconst renderPatientSelection=()=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Patient\"}),!selectedPatient?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"patient-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toggle-btn \".concat(patientType===\"existing\"?\"active\":\"\"),onClick:()=>{setPatientType(\"existing\");setNewPatient(_objectSpread({},EMPTY_PATIENT));},children:\"Existing Patient\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toggle-btn \".concat(patientType===\"new\"?\"active\":\"\"),onClick:()=>{setPatientType(\"new\");setSearchQuery(\"\");setSearchResults([]);},children:\"New Patient\"})]}),patientType===\"existing\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"patient-search\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by patient name...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"search-input\"}),searchResults.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:searchResults.map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"search-result-item\",onClick:()=>selectPatient(p),children:[/*#__PURE__*/_jsx(\"strong\",{children:p.full_name}),/*#__PURE__*/_jsxs(\"span\",{children:[p.age,\" yrs \\xB7 \",p.gender]}),p.blood_group&&/*#__PURE__*/_jsxs(\"span\",{children:[\" \\xB7 \",p.blood_group]})]},p.id))}),searchQuery.trim().length>=2&&searchResults.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"no-results\",children:\"No patients found.\"})]}),patientType===\"new\"&&renderNewPatientForm()]}):/*#__PURE__*/_jsxs(\"div\",{className:\"selected-patient\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"selected-patient-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:selectedPatient.full_name}),/*#__PURE__*/_jsxs(\"span\",{children:[selectedPatient.age,\" yrs \\xB7 \",selectedPatient.gender]}),selectedPatient.blood_group&&/*#__PURE__*/_jsxs(\"span\",{children:[\" \\xB7 \",selectedPatient.blood_group]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"voice-btn voice-btn-clear\",onClick:()=>{setSelectedPatient(null);setInputMode(null);clearAll();},children:\"Change Patient\"})]})]});const renderNewPatientForm=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"new-patient-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newPatient.full_name,onChange:e=>handleNewPatientChange(\"full_name\",e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Age *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newPatient.age,onChange:e=>handleNewPatientChange(\"age\",e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gender *\"}),/*#__PURE__*/_jsxs(\"select\",{value:newPatient.gender,onChange:e=>handleNewPatientChange(\"gender\",e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Blood Group\"}),/*#__PURE__*/_jsxs(\"select\",{value:newPatient.blood_group,onChange:e=>handleNewPatientChange(\"blood_group\",e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),[\"A+\",\"A-\",\"B+\",\"B-\",\"O+\",\"O-\",\"AB+\",\"AB-\"].map(bg=>/*#__PURE__*/_jsx(\"option\",{value:bg,children:bg},bg))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Allergies\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newPatient.allergies,onChange:e=>handleNewPatientChange(\"allergies\",e.target.value),placeholder:\"e.g. Penicillin\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Past Surgeries\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newPatient.past_surgeries,onChange:e=>handleNewPatientChange(\"past_surgeries\",e.target.value),placeholder:\"e.g. Appendectomy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"medical-history\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"history-heading\",children:\"Medical History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-grid\",children:[[\"diabetes\",\"Diabetes\"],[\"hypertension\",\"Hypertension\"],[\"heart_disease\",\"Heart Disease\"],[\"asthma\",\"Asthma\"],[\"chronic_kidney_disease\",\"Chronic Kidney Disease\"],[\"previous_stroke\",\"Previous Stroke\"],[\"smoker\",\"Smoker\"],[\"obese\",\"Obese\"],[\"previous_heart_attack\",\"Previous Heart Attack\"],[\"previous_hospitalization\",\"Previous Hospitalization\"]].map(_ref=>{let[field,label]=_ref;return/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newPatient[field],onChange:e=>handleNewPatientChange(field,e.target.checked)}),label]},field);})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"voice-btn voice-btn-submit\",onClick:handleCreatePatient,disabled:saving,children:saving?\"Saving...\":\"Register Patient\"})]});const renderInputModeSelector=()=>/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:24},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",style:{color:\"#f87171\"},children:\"Symptom Input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"patient-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toggle-btn \".concat(inputMode===\"manual\"?\"active\":\"\"),onClick:()=>{setInputMode(\"manual\");clearAll();},children:\"Manual Entry\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toggle-btn \".concat(inputMode===\"voice\"?\"active\":\"\"),onClick:()=>{setInputMode(\"voice\");clearAll();},children:\"Voice Input\"})]})]});const renderManualInput=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"voice-transcript\",style:{marginTop:16},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Describe Symptoms:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:transcript,onChange:e=>setTranscript(e.target.value),rows:4,placeholder:\"Type the patient's symptoms here...\"}),/*#__PURE__*/_jsx(\"button\",{className:\"voice-btn voice-btn-submit\",onClick:handleTriageSubmit,disabled:triageLoading||!transcript.trim(),children:triageLoading?\"Analyzing...\":\"Analyze Symptoms\"})]});const renderVoiceInput=()=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"voice-controls\",style:{marginTop:16},children:[isListening?/*#__PURE__*/_jsx(\"button\",{className:\"voice-btn voice-btn-stop\",onClick:stopListening,children:\"Stop Recording\"}):/*#__PURE__*/_jsx(\"button\",{className:\"voice-btn voice-btn-start\",onClick:startListening,children:\"Start Recording\"}),transcript&&/*#__PURE__*/_jsx(\"button\",{className:\"voice-btn voice-btn-clear\",onClick:clearAll,children:\"Clear\"})]}),isListening&&/*#__PURE__*/_jsx(\"div\",{className:\"voice-indicator\",children:\"Listening...\"}),translating&&/*#__PURE__*/_jsxs(\"div\",{className:\"voice-translating\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"translating-spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Translating audio...\"})]}),transcript&&/*#__PURE__*/_jsxs(\"div\",{className:\"voice-transcript\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Translated Text:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:transcript,onChange:e=>setTranscript(e.target.value),rows:3}),/*#__PURE__*/_jsx(\"button\",{className:\"voice-btn voice-btn-submit\",onClick:handleTriageSubmit,disabled:triageLoading,children:triageLoading?\"Analyzing...\":\"Analyze Symptoms\"})]})]});const renderTriageResult=()=>/*#__PURE__*/_jsxs(_Fragment,{children:[triageResult&&triageResult.error&&/*#__PURE__*/_jsx(\"p\",{className:\"voice-error\",children:triageResult.error}),triageResult&&!triageResult.error&&!confirmed&&/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"confirm-title\",children:\"Assign Department\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-recommendation\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"confirm-label\",children:\"AI Recommendation:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"confirm-dept-name\",children:chosenDepartment.replace(/_/g,\" \")}),/*#__PURE__*/_jsxs(\"span\",{className:\"confirm-confidence\",children:[Math.round(triageResult.confidence*100),\"% confidence\"]})]}),!overrideMode?/*#__PURE__*/_jsxs(_Fragment,{children:[selectedDoctor&&/*#__PURE__*/_jsxs(\"div\",{className:\"auto-assign-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"confirm-label\",children:\"Auto-assigned Doctor:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"confirm-dept-name\",children:[\"Dr. \",selectedDoctor.name]}),/*#__PURE__*/_jsxs(\"span\",{className:\"confirm-confidence\",children:[selectedDoctor.patient_count,\" current patient\",selectedDoctor.patient_count!==1?\"s\":\"\"]})]}),!selectedDoctor&&doctors.length===0&&chosenDepartment&&/*#__PURE__*/_jsx(\"p\",{className:\"no-results\",children:\"No doctors available for this department.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"confirm-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn confirm-btn-override\",onClick:()=>{setOverrideMode(true);setSelectedDoctor(null);},children:\"Override Department / Doctor\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"override-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"override-label\",children:\"Select Department:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dept-grid\",children:DEPARTMENTS.map(dept=>/*#__PURE__*/_jsx(\"button\",{className:\"dept-btn \".concat(chosenDepartment===dept?\"active\":\"\"),onClick:()=>{setChosenDepartment(dept);setSelectedDoctor(null);},children:dept.replace(/_/g,\" \")},dept))}),chosenDepartment&&/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-section\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"doctor-label\",children:[\"Select Doctor (\",chosenDepartment.replace(/_/g,\" \"),\"):\"]}),doctors.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-results\",children:\"No doctors found for this department.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"doctor-list\",children:doctors.map(doc=>/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-item \".concat((selectedDoctor===null||selectedDoctor===void 0?void 0:selectedDoctor.id)===doc.id?\"active\":\"\"),onClick:()=>setSelectedDoctor(doc),children:[/*#__PURE__*/_jsx(\"strong\",{children:doc.name}),/*#__PURE__*/_jsx(\"span\",{children:doc.department}),/*#__PURE__*/_jsxs(\"span\",{className:\"doctor-load\",children:[doc.patient_count,\" patient\",doc.patient_count!==1?\"s\":\"\"]})]},doc.id))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn confirm-btn-cancel\",onClick:()=>{setOverrideMode(false);setChosenDepartment(triageResult.assigned_department);},children:\"Cancel Override\"})]}),selectedDoctor&&/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn confirm-btn-final\",onClick:handleConfirm,disabled:confirming,children:confirming?\"Confirming...\":\"Confirm: Dr. \".concat(selectedDoctor.name,\" \\u2192 \").concat(chosenDepartment.replace(/_/g,\" \"))})]}),confirmed&&/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-success\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Emergency Case Confirmed\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:confirmed.patient}),\" assigned to\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"Dr. \",confirmed.doctor]}),\" in\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:confirmed.department.replace(/_/g,\" \")})]}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn confirm-btn-accept\",onClick:()=>{setSelectedPatient(null);setInputMode(null);clearAll();},children:\"New Case\"})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"nurse-page\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"nurse-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nurse-header-left\",onClick:()=>navigate(\"/nurse\"),style:{cursor:\"pointer\"},children:[/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 48 48\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"18\",y:\"4\",width:\"12\",height:\"30\",rx:\"3\",fill:\"white\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"6\",y:\"12\",width:\"36\",height:\"12\",rx:\"3\",fill:\"white\"}),/*#__PURE__*/_jsx(\"ellipse\",{cx:\"36\",cy:\"38\",rx:\"6\",ry:\"3\",fill:\"none\",stroke:\"white\",strokeWidth:\"1.5\"}),/*#__PURE__*/_jsx(\"ellipse\",{cx:\"36\",cy:\"42\",rx:\"6\",ry:\"3\",fill:\"none\",stroke:\"white\",strokeWidth:\"1.5\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"Apex Health\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nurse-header-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"nurse-name\",children:[\"Nurse: \",/*#__PURE__*/_jsx(\"strong\",{children:nurseName})]}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:handleLogout,children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"nurse-main\",children:[errorMsg&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16,padding:\"12px 16px\",background:\"rgba(239, 68, 68, 0.08)\",border:\"1px solid rgba(239, 68, 68, 0.3)\",borderRadius:8,color:\"#f87171\",fontSize:14,display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{children:errorMsg}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setErrorMsg(\"\"),style:{background:\"none\",border:\"none\",color:\"#f87171\",cursor:\"pointer\",fontSize:18,padding:\"0 4px\"},children:\"x\"})]}),renderPatientSelection(),selectedPatient&&!confirmed&&/*#__PURE__*/_jsxs(_Fragment,{children:[renderInputModeSelector(),inputMode===\"manual\"&&renderManualInput(),inputMode===\"voice\"&&renderVoiceInput(),renderTriageResult()]}),confirmed&&renderTriageResult()]})]});}export default EmergencyCases;","map":{"version":3,"names":["useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","getCookie","name","cookieValue","document","cookie","cookies","split","trim","startsWith","decodeURIComponent","substring","length","DEPARTMENTS","EMPTY_PATIENT","full_name","age","gender","blood_group","allergies","past_surgeries","diabetes","hypertension","heart_disease","asthma","chronic_kidney_disease","previous_stroke","smoker","obese","previous_heart_attack","previous_hospitalization","EmergencyCases","nurseName","setNurseName","navigate","patientType","setPatientType","searchQuery","setSearchQuery","searchResults","setSearchResults","selectedPatient","setSelectedPatient","newPatient","setNewPatient","_objectSpread","saving","setSaving","inputMode","setInputMode","transcript","setTranscript","isListening","setIsListening","mediaRecorder","setMediaRecorder","translating","setTranslating","triageResult","setTriageResult","triageLoading","setTriageLoading","chosenDepartment","setChosenDepartment","overrideMode","setOverrideMode","doctors","setDoctors","selectedDoctor","setSelectedDoctor","confirming","setConfirming","confirmed","setConfirmed","errorMsg","setErrorMsg","fetch","credentials","then","res","ok","json","roleData","role","handleLogout","csrfToken","method","headers","timer","setTimeout","concat","encodeURIComponent","data","Array","isArray","catch","clearTimeout","selectPatient","patient","handleNewPatientChange","field","value","prev","handleCreatePatient","body","JSON","stringify","result","id","error","_unused","startListening","stream","navigator","mediaDevices","getUserMedia","audio","recorder","MediaRecorder","chunks","ondataavailable","e","size","push","onstop","audioBlob","Blob","type","formData","FormData","append","response","translated_text","_unused2","start","_unused3","stopListening","stop","handleTriageSubmit","symptoms","_unused4","clearAll","assigned_department","handleConfirm","patient_id","doctor_id","department","_unused5","renderPatientSelection","children","className","onClick","placeholder","onChange","target","map","p","renderNewPatientForm","bg","_ref","label","checked","disabled","renderInputModeSelector","style","marginTop","color","renderManualInput","rows","renderVoiceInput","renderTriageResult","replace","Math","round","confidence","patient_count","dept","doc","doctor","cursor","viewBox","xmlns","x","y","width","height","rx","fill","cx","cy","ry","stroke","strokeWidth","marginBottom","padding","background","border","borderRadius","fontSize","display","justifyContent","alignItems"],"sources":["C:/Users/Praanesh MB/OneDrive/Documents/Kanini-Hackathon-master/frontend/src/pages/EmergencyCases.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./NurseDashboard.css\";\nimport \"./EmergencyCases.css\";\n\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== \"\") {\n    const cookies = document.cookie.split(\";\");\n    for (let cookie of cookies) {\n      cookie = cookie.trim();\n      if (cookie.startsWith(name + \"=\")) {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\nconst DEPARTMENTS = [\n  \"Emergency\",\n  \"General_Medicine\",\n  \"Cardiology\",\n  \"Neurology\",\n  \"Pulmonology\",\n  \"Gastroenterology\",\n  \"Orthopedics\",\n  \"Pediatrics\",\n  \"Nephrology\",\n  \"Endocrinology\",\n];\n\nconst EMPTY_PATIENT = {\n  full_name: \"\",\n  age: \"\",\n  gender: \"\",\n  blood_group: \"\",\n  allergies: \"\",\n  past_surgeries: \"\",\n  diabetes: false,\n  hypertension: false,\n  heart_disease: false,\n  asthma: false,\n  chronic_kidney_disease: false,\n  previous_stroke: false,\n  smoker: false,\n  obese: false,\n  previous_heart_attack: false,\n  previous_hospitalization: false,\n};\n\nfunction EmergencyCases() {\n  const [nurseName, setNurseName] = useState(\"\");\n  const navigate = useNavigate();\n\n  // Patient states\n  const [patientType, setPatientType] = useState(\"existing\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [newPatient, setNewPatient] = useState({ ...EMPTY_PATIENT });\n  const [saving, setSaving] = useState(false);\n\n  // Input mode: \"voice\" | \"manual\"\n  const [inputMode, setInputMode] = useState(null);\n\n  // Symptoms text (shared between voice and manual)\n  const [transcript, setTranscript] = useState(\"\");\n\n  // Voice states\n  const [isListening, setIsListening] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [translating, setTranslating] = useState(false);\n\n  // Triage states\n  const [triageResult, setTriageResult] = useState(null);\n  const [triageLoading, setTriageLoading] = useState(false);\n\n  // Confirmation states\n  const [chosenDepartment, setChosenDepartment] = useState(\"\");\n  const [overrideMode, setOverrideMode] = useState(false);\n  const [doctors, setDoctors] = useState([]);\n  const [selectedDoctor, setSelectedDoctor] = useState(null);\n  const [confirming, setConfirming] = useState(false);\n  const [confirmed, setConfirmed] = useState(null);\n\n  // Error state (replaces alert())\n  const [errorMsg, setErrorMsg] = useState(\"\");\n\n  useEffect(() => {\n    fetch(\"http://localhost:8000/api/user-role/\", { credentials: \"include\" })\n      .then((res) => {\n        if (!res.ok) {\n          navigate(\"/\");\n          return null;\n        }\n        return res.json();\n      })\n      .then((roleData) => {\n        if (!roleData) return;\n        if (roleData.role !== \"nurse\") {\n          navigate(\"/\");\n          return;\n        }\n        setNurseName(roleData.name || \"\");\n      });\n  }, [navigate]);\n\n  const handleLogout = async () => {\n    const csrfToken = getCookie(\"csrftoken\");\n    await fetch(\"http://localhost:8000/api/logout/\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: { \"X-CSRFToken\": csrfToken },\n    });\n    navigate(\"/\");\n  };\n\n  // ---------- Patient Search ----------\n  useEffect(() => {\n    if (patientType !== \"existing\" || searchQuery.trim().length < 2) {\n      setSearchResults([]);\n      return;\n    }\n    const timer = setTimeout(() => {\n      fetch(\n        `http://localhost:8000/api/patient/search/?q=${encodeURIComponent(searchQuery)}`,\n        { credentials: \"include\" },\n      )\n        .then((res) => res.json())\n        .then((data) => {\n          if (Array.isArray(data)) setSearchResults(data);\n        })\n        .catch(() => {});\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [searchQuery, patientType]);\n\n  const selectPatient = (patient) => {\n    setSelectedPatient(patient);\n    setSearchQuery(\"\");\n    setSearchResults([]);\n  };\n\n  // ---------- New Patient ----------\n  const handleNewPatientChange = (field, value) => {\n    setNewPatient((prev) => ({ ...prev, [field]: value }));\n  };\n\n  const handleCreatePatient = async () => {\n    if (!newPatient.full_name.trim() || !newPatient.age || !newPatient.gender) {\n      setErrorMsg(\"Name, age, and gender are required.\");\n      return;\n    }\n    setSaving(true);\n    setErrorMsg(\"\");\n    try {\n      const csrfToken = getCookie(\"csrftoken\");\n      const res = await fetch(\"http://localhost:8000/api/patient/create/\", {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRFToken\": csrfToken,\n        },\n        body: JSON.stringify(newPatient),\n      });\n      const result = await res.json();\n      if (res.ok) {\n        setSelectedPatient({ ...newPatient, id: result.id });\n        setNewPatient({ ...EMPTY_PATIENT });\n      } else {\n        setErrorMsg(result.error || \"Failed to create patient.\");\n      }\n    } catch {\n      setErrorMsg(\"Error connecting to server.\");\n    }\n    setSaving(false);\n  };\n\n  // ---------- Voice Recording ----------\n  const startListening = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const recorder = new MediaRecorder(stream);\n      setMediaRecorder(recorder);\n      const chunks = [];\n      recorder.ondataavailable = (e) => {\n        if (e.data.size > 0) chunks.push(e.data);\n      };\n      recorder.onstop = async () => {\n        const audioBlob = new Blob(chunks, { type: \"audio/webm\" });\n        const formData = new FormData();\n        formData.append(\"audio\", audioBlob, \"recording.webm\");\n        setTranslating(true);\n        try {\n          const response = await fetch(\"http://localhost:8000/api/whisper/\", {\n            method: \"POST\",\n            credentials: \"include\",\n            body: formData,\n          });\n          const data = await response.json();\n          if (data.translated_text) {\n            setTranscript(data.translated_text);\n          } else {\n            setErrorMsg(data.error || \"Transcription failed. Try recording again.\");\n          }\n        } catch {\n          setErrorMsg(\"Error sending audio to server.\");\n        }\n        setTranslating(false);\n      };\n      recorder.start();\n      setIsListening(true);\n    } catch {\n      setErrorMsg(\"Microphone access denied.\");\n    }\n  };\n\n  const stopListening = () => {\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n      setIsListening(false);\n    }\n  };\n\n  // ---------- Triage Submit ----------\n  const handleTriageSubmit = async () => {\n    if (!transcript.trim()) return;\n    setTriageLoading(true);\n    setTriageResult(null);\n    try {\n      const csrfToken = getCookie(\"csrftoken\");\n      const res = await fetch(\"http://localhost:8000/api/triage/\", {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRFToken\": csrfToken,\n        },\n        body: JSON.stringify({ symptoms: transcript }),\n      });\n      const result = await res.json();\n      setTriageResult(result);\n    } catch {\n      setTriageResult({ error: \"Failed to reach server.\" });\n    }\n    setTriageLoading(false);\n  };\n\n  const clearAll = () => {\n    setTranscript(\"\");\n    setTriageResult(null);\n    setChosenDepartment(\"\");\n    setOverrideMode(false);\n    setDoctors([]);\n    setSelectedDoctor(null);\n    setConfirmed(null);\n    setErrorMsg(\"\");\n  };\n\n  // ---------- Fetch doctors ----------\n  useEffect(() => {\n    if (!chosenDepartment) {\n      setDoctors([]);\n      setSelectedDoctor(null);\n      return;\n    }\n    fetch(\n      `http://localhost:8000/api/doctors/?department=${encodeURIComponent(chosenDepartment)}`,\n      { credentials: \"include\" },\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (Array.isArray(data)) {\n          setDoctors(data);\n          // Auto-select least-loaded doctor (API returns sorted by patient_count)\n          if (!overrideMode && data.length > 0) {\n            setSelectedDoctor(data[0]);\n          }\n        }\n      })\n      .catch(() => {});\n  }, [chosenDepartment, overrideMode]);\n\n  useEffect(() => {\n    if (\n      triageResult &&\n      !triageResult.error &&\n      triageResult.assigned_department\n    ) {\n      setChosenDepartment(triageResult.assigned_department);\n      setOverrideMode(false);\n      setConfirmed(null);\n    }\n  }, [triageResult]);\n\n  // ---------- Confirm Assignment ----------\n  const handleConfirm = async () => {\n    if (!selectedDoctor || !chosenDepartment || !selectedPatient) return;\n    setConfirming(true);\n    setErrorMsg(\"\");\n    try {\n      const csrfToken = getCookie(\"csrftoken\");\n      const res = await fetch(\"http://localhost:8000/api/emergency/confirm/\", {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRFToken\": csrfToken,\n        },\n        body: JSON.stringify({\n          patient_id: selectedPatient.id,\n          doctor_id: selectedDoctor.id,\n          department: chosenDepartment,\n          symptoms: transcript,\n        }),\n      });\n      const result = await res.json();\n      if (res.ok) {\n        setConfirmed(result);\n      } else {\n        setErrorMsg(result.error || \"Failed to confirm.\");\n      }\n    } catch {\n      setErrorMsg(\"Error connecting to server.\");\n    }\n    setConfirming(false);\n  };\n\n  // ---------- Render helpers ----------\n  const renderPatientSelection = () => (\n    <>\n      <h2 className=\"section-title\">Patient</h2>\n      {!selectedPatient ? (\n        <>\n          <div className=\"patient-toggle\">\n            <button\n              className={`toggle-btn ${patientType === \"existing\" ? \"active\" : \"\"}`}\n              onClick={() => {\n                setPatientType(\"existing\");\n                setNewPatient({ ...EMPTY_PATIENT });\n              }}\n            >\n              Existing Patient\n            </button>\n            <button\n              className={`toggle-btn ${patientType === \"new\" ? \"active\" : \"\"}`}\n              onClick={() => {\n                setPatientType(\"new\");\n                setSearchQuery(\"\");\n                setSearchResults([]);\n              }}\n            >\n              New Patient\n            </button>\n          </div>\n\n          {patientType === \"existing\" && (\n            <div className=\"patient-search\">\n              <input\n                type=\"text\"\n                placeholder=\"Search by patient name...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"search-input\"\n              />\n              {searchResults.length > 0 && (\n                <div className=\"search-results\">\n                  {searchResults.map((p) => (\n                    <div\n                      key={p.id}\n                      className=\"search-result-item\"\n                      onClick={() => selectPatient(p)}\n                    >\n                      <strong>{p.full_name}</strong>\n                      <span>\n                        {p.age} yrs · {p.gender}\n                      </span>\n                      {p.blood_group && <span> · {p.blood_group}</span>}\n                    </div>\n                  ))}\n                </div>\n              )}\n              {searchQuery.trim().length >= 2 && searchResults.length === 0 && (\n                <p className=\"no-results\">No patients found.</p>\n              )}\n            </div>\n          )}\n\n          {patientType === \"new\" && renderNewPatientForm()}\n        </>\n      ) : (\n        <div className=\"selected-patient\">\n          <div className=\"selected-patient-info\">\n            <strong>{selectedPatient.full_name}</strong>\n            <span>\n              {selectedPatient.age} yrs · {selectedPatient.gender}\n            </span>\n            {selectedPatient.blood_group && (\n              <span> · {selectedPatient.blood_group}</span>\n            )}\n          </div>\n          <button\n            className=\"voice-btn voice-btn-clear\"\n            onClick={() => {\n              setSelectedPatient(null);\n              setInputMode(null);\n              clearAll();\n            }}\n          >\n            Change Patient\n          </button>\n        </div>\n      )}\n    </>\n  );\n\n  const renderNewPatientForm = () => (\n    <div className=\"new-patient-form\">\n      <div className=\"form-row\">\n        <div className=\"form-field\">\n          <label>Full Name *</label>\n          <input\n            type=\"text\"\n            value={newPatient.full_name}\n            onChange={(e) =>\n              handleNewPatientChange(\"full_name\", e.target.value)\n            }\n          />\n        </div>\n        <div className=\"form-field\">\n          <label>Age *</label>\n          <input\n            type=\"number\"\n            value={newPatient.age}\n            onChange={(e) => handleNewPatientChange(\"age\", e.target.value)}\n          />\n        </div>\n        <div className=\"form-field\">\n          <label>Gender *</label>\n          <select\n            value={newPatient.gender}\n            onChange={(e) => handleNewPatientChange(\"gender\", e.target.value)}\n          >\n            <option value=\"\">Select</option>\n            <option value=\"Male\">Male</option>\n            <option value=\"Female\">Female</option>\n            <option value=\"Other\">Other</option>\n          </select>\n        </div>\n      </div>\n      <div className=\"form-row\">\n        <div className=\"form-field\">\n          <label>Blood Group</label>\n          <select\n            value={newPatient.blood_group}\n            onChange={(e) =>\n              handleNewPatientChange(\"blood_group\", e.target.value)\n            }\n          >\n            <option value=\"\">Select</option>\n            {[\"A+\", \"A-\", \"B+\", \"B-\", \"O+\", \"O-\", \"AB+\", \"AB-\"].map((bg) => (\n              <option key={bg} value={bg}>\n                {bg}\n              </option>\n            ))}\n          </select>\n        </div>\n        <div className=\"form-field\">\n          <label>Allergies</label>\n          <input\n            type=\"text\"\n            value={newPatient.allergies}\n            onChange={(e) =>\n              handleNewPatientChange(\"allergies\", e.target.value)\n            }\n            placeholder=\"e.g. Penicillin\"\n          />\n        </div>\n        <div className=\"form-field\">\n          <label>Past Surgeries</label>\n          <input\n            type=\"text\"\n            value={newPatient.past_surgeries}\n            onChange={(e) =>\n              handleNewPatientChange(\"past_surgeries\", e.target.value)\n            }\n            placeholder=\"e.g. Appendectomy\"\n          />\n        </div>\n      </div>\n      <div className=\"medical-history\">\n        <label className=\"history-heading\">Medical History</label>\n        <div className=\"checkbox-grid\">\n          {[\n            [\"diabetes\", \"Diabetes\"],\n            [\"hypertension\", \"Hypertension\"],\n            [\"heart_disease\", \"Heart Disease\"],\n            [\"asthma\", \"Asthma\"],\n            [\"chronic_kidney_disease\", \"Chronic Kidney Disease\"],\n            [\"previous_stroke\", \"Previous Stroke\"],\n            [\"smoker\", \"Smoker\"],\n            [\"obese\", \"Obese\"],\n            [\"previous_heart_attack\", \"Previous Heart Attack\"],\n            [\"previous_hospitalization\", \"Previous Hospitalization\"],\n          ].map(([field, label]) => (\n            <label key={field} className=\"checkbox-label\">\n              <input\n                type=\"checkbox\"\n                checked={newPatient[field]}\n                onChange={(e) =>\n                  handleNewPatientChange(field, e.target.checked)\n                }\n              />\n              {label}\n            </label>\n          ))}\n        </div>\n      </div>\n      <button\n        className=\"voice-btn voice-btn-submit\"\n        onClick={handleCreatePatient}\n        disabled={saving}\n      >\n        {saving ? \"Saving...\" : \"Register Patient\"}\n      </button>\n    </div>\n  );\n\n  const renderInputModeSelector = () => (\n    <div style={{ marginTop: 24 }}>\n      <h2 className=\"section-title\" style={{ color: \"#f87171\" }}>\n        Symptom Input\n      </h2>\n      <div className=\"patient-toggle\">\n        <button\n          className={`toggle-btn ${inputMode === \"manual\" ? \"active\" : \"\"}`}\n          onClick={() => {\n            setInputMode(\"manual\");\n            clearAll();\n          }}\n        >\n          Manual Entry\n        </button>\n        <button\n          className={`toggle-btn ${inputMode === \"voice\" ? \"active\" : \"\"}`}\n          onClick={() => {\n            setInputMode(\"voice\");\n            clearAll();\n          }}\n        >\n          Voice Input\n        </button>\n      </div>\n    </div>\n  );\n\n  const renderManualInput = () => (\n    <div className=\"voice-transcript\" style={{ marginTop: 16 }}>\n      <label>Describe Symptoms:</label>\n      <textarea\n        value={transcript}\n        onChange={(e) => setTranscript(e.target.value)}\n        rows={4}\n        placeholder=\"Type the patient's symptoms here...\"\n      />\n      <button\n        className=\"voice-btn voice-btn-submit\"\n        onClick={handleTriageSubmit}\n        disabled={triageLoading || !transcript.trim()}\n      >\n        {triageLoading ? \"Analyzing...\" : \"Analyze Symptoms\"}\n      </button>\n    </div>\n  );\n\n  const renderVoiceInput = () => (\n    <>\n      <div className=\"voice-controls\" style={{ marginTop: 16 }}>\n        {isListening ? (\n          <button className=\"voice-btn voice-btn-stop\" onClick={stopListening}>\n            Stop Recording\n          </button>\n        ) : (\n          <button\n            className=\"voice-btn voice-btn-start\"\n            onClick={startListening}\n          >\n            Start Recording\n          </button>\n        )}\n        {transcript && (\n          <button className=\"voice-btn voice-btn-clear\" onClick={clearAll}>\n            Clear\n          </button>\n        )}\n      </div>\n      {isListening && <div className=\"voice-indicator\">Listening...</div>}\n      {translating && (\n        <div className=\"voice-translating\">\n          <div className=\"translating-spinner\"></div>\n          <span>Translating audio...</span>\n        </div>\n      )}\n      {transcript && (\n        <div className=\"voice-transcript\">\n          <label>Translated Text:</label>\n          <textarea\n            value={transcript}\n            onChange={(e) => setTranscript(e.target.value)}\n            rows={3}\n          />\n          <button\n            className=\"voice-btn voice-btn-submit\"\n            onClick={handleTriageSubmit}\n            disabled={triageLoading}\n          >\n            {triageLoading ? \"Analyzing...\" : \"Analyze Symptoms\"}\n          </button>\n        </div>\n      )}\n    </>\n  );\n\n  const renderTriageResult = () => (\n    <>\n      {triageResult && triageResult.error && (\n        <p className=\"voice-error\">{triageResult.error}</p>\n      )}\n\n      {triageResult && !triageResult.error && !confirmed && (\n        <div className=\"confirm-section\">\n          <h3 className=\"confirm-title\">Assign Department</h3>\n          <div className=\"confirm-recommendation\">\n            <span className=\"confirm-label\">AI Recommendation:</span>\n            <span className=\"confirm-dept-name\">\n              {chosenDepartment.replace(/_/g, \" \")}\n            </span>\n            <span className=\"confirm-confidence\">\n              {Math.round(triageResult.confidence * 100)}% confidence\n            </span>\n          </div>\n\n          {!overrideMode ? (\n            <>\n              {/* Auto-assigned doctor (least loaded) */}\n              {selectedDoctor && (\n                <div className=\"auto-assign-info\">\n                  <span className=\"confirm-label\">Auto-assigned Doctor:</span>\n                  <span className=\"confirm-dept-name\">\n                    Dr. {selectedDoctor.name}\n                  </span>\n                  <span className=\"confirm-confidence\">\n                    {selectedDoctor.patient_count} current patient\n                    {selectedDoctor.patient_count !== 1 ? \"s\" : \"\"}\n                  </span>\n                </div>\n              )}\n              {!selectedDoctor && doctors.length === 0 && chosenDepartment && (\n                <p className=\"no-results\">\n                  No doctors available for this department.\n                </p>\n              )}\n              <div className=\"confirm-actions\">\n                <button\n                  className=\"confirm-btn confirm-btn-override\"\n                  onClick={() => {\n                    setOverrideMode(true);\n                    setSelectedDoctor(null);\n                  }}\n                >\n                  Override Department / Doctor\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"override-section\">\n              <label className=\"override-label\">Select Department:</label>\n              <div className=\"dept-grid\">\n                {DEPARTMENTS.map((dept) => (\n                  <button\n                    key={dept}\n                    className={`dept-btn ${chosenDepartment === dept ? \"active\" : \"\"}`}\n                    onClick={() => {\n                      setChosenDepartment(dept);\n                      setSelectedDoctor(null);\n                    }}\n                  >\n                    {dept.replace(/_/g, \" \")}\n                  </button>\n                ))}\n              </div>\n\n              {chosenDepartment && (\n                <div className=\"doctor-section\">\n                  <label className=\"doctor-label\">\n                    Select Doctor ({chosenDepartment.replace(/_/g, \" \")}):\n                  </label>\n                  {doctors.length === 0 ? (\n                    <p className=\"no-results\">\n                      No doctors found for this department.\n                    </p>\n                  ) : (\n                    <div className=\"doctor-list\">\n                      {doctors.map((doc) => (\n                        <div\n                          key={doc.id}\n                          className={`doctor-item ${selectedDoctor?.id === doc.id ? \"active\" : \"\"}`}\n                          onClick={() => setSelectedDoctor(doc)}\n                        >\n                          <strong>{doc.name}</strong>\n                          <span>{doc.department}</span>\n                          <span className=\"doctor-load\">\n                            {doc.patient_count} patient\n                            {doc.patient_count !== 1 ? \"s\" : \"\"}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              )}\n\n              <button\n                className=\"confirm-btn confirm-btn-cancel\"\n                onClick={() => {\n                  setOverrideMode(false);\n                  setChosenDepartment(triageResult.assigned_department);\n                }}\n              >\n                Cancel Override\n              </button>\n            </div>\n          )}\n\n          {selectedDoctor && (\n            <button\n              className=\"confirm-btn confirm-btn-final\"\n              onClick={handleConfirm}\n              disabled={confirming}\n            >\n              {confirming\n                ? \"Confirming...\"\n                : `Confirm: Dr. ${selectedDoctor.name} → ${chosenDepartment.replace(/_/g, \" \")}`}\n            </button>\n          )}\n        </div>\n      )}\n\n      {confirmed && (\n        <div className=\"confirm-success\">\n          <h3>Emergency Case Confirmed</h3>\n          <p>\n            <strong>{confirmed.patient}</strong> assigned to{\" \"}\n            <strong>Dr. {confirmed.doctor}</strong> in{\" \"}\n            <strong>{confirmed.department.replace(/_/g, \" \")}</strong>\n          </p>\n          <button\n            className=\"confirm-btn confirm-btn-accept\"\n            onClick={() => {\n              setSelectedPatient(null);\n              setInputMode(null);\n              clearAll();\n            }}\n          >\n            New Case\n          </button>\n        </div>\n      )}\n    </>\n  );\n\n  return (\n    <div className=\"nurse-page\">\n      <header className=\"nurse-header\">\n        <div\n          className=\"nurse-header-left\"\n          onClick={() => navigate(\"/nurse\")}\n          style={{ cursor: \"pointer\" }}\n        >\n          <svg viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n            <rect x=\"18\" y=\"4\" width=\"12\" height=\"30\" rx=\"3\" fill=\"white\" />\n            <rect x=\"6\" y=\"12\" width=\"36\" height=\"12\" rx=\"3\" fill=\"white\" />\n            <ellipse\n              cx=\"36\"\n              cy=\"38\"\n              rx=\"6\"\n              ry=\"3\"\n              fill=\"none\"\n              stroke=\"white\"\n              strokeWidth=\"1.5\"\n            />\n            <ellipse\n              cx=\"36\"\n              cy=\"42\"\n              rx=\"6\"\n              ry=\"3\"\n              fill=\"none\"\n              stroke=\"white\"\n              strokeWidth=\"1.5\"\n            />\n          </svg>\n          <span>Apex Health</span>\n        </div>\n        <div className=\"nurse-header-right\">\n          <span className=\"nurse-name\">\n            Nurse: <strong>{nurseName}</strong>\n          </span>\n          <button className=\"logout-btn\" onClick={handleLogout}>\n            Logout\n          </button>\n        </div>\n      </header>\n\n      <main className=\"nurse-main\">\n        {/* Error Banner */}\n        {errorMsg && (\n          <div style={{\n            marginBottom: 16,\n            padding: \"12px 16px\",\n            background: \"rgba(239, 68, 68, 0.08)\",\n            border: \"1px solid rgba(239, 68, 68, 0.3)\",\n            borderRadius: 8,\n            color: \"#f87171\",\n            fontSize: 14,\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n          }}>\n            <span>{errorMsg}</span>\n            <button\n              onClick={() => setErrorMsg(\"\")}\n              style={{\n                background: \"none\",\n                border: \"none\",\n                color: \"#f87171\",\n                cursor: \"pointer\",\n                fontSize: 18,\n                padding: \"0 4px\",\n              }}\n            >\n              x\n            </button>\n          </div>\n        )}\n\n        {renderPatientSelection()}\n\n        {selectedPatient && !confirmed && (\n          <>\n            {renderInputModeSelector()}\n            {inputMode === \"manual\" && renderManualInput()}\n            {inputMode === \"voice\" && renderVoiceInput()}\n            {renderTriageResult()}\n          </>\n        )}\n\n        {confirmed && renderTriageResult()}\n      </main>\n    </div>\n  );\n}\n\nexport default EmergencyCases;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}