{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function getCookie(name){let cookieValue=null;if(document.cookie&&document.cookie!==\"\"){const cookies=document.cookie.split(\";\");for(let cookie of cookies){cookie=cookie.trim();if(cookie.startsWith(name+\"=\")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}function NurseDashboard(){const[data,setData]=useState([]);const[loading,setLoading]=useState(true);const navigate=useNavigate();// Protect route\nuseEffect(()=>{fetch(\"http://192.168.18.207:8000/api/user-role/\",{credentials:\"include\"}).then(res=>{if(!res.ok)navigate(\"/\");return res.json();}).then(roleData=>{if(roleData.role!==\"nurse\")navigate(\"/\");});},[navigate]);// Load dashboard data\nuseEffect(()=>{fetch(\"http://192.168.18.207:8000/api/nurse-dashboard/\",{credentials:\"include\"}).then(res=>res.json()).then(result=>{if(Array.isArray(result))setData(result);setLoading(false);}).catch(()=>setLoading(false));},[]);const handleLogout=async()=>{const csrfToken=getCookie(\"csrftoken\");await fetch(\"http://192.168.18.207:8000/api/logout/\",{method:\"POST\",credentials:\"include\",headers:{\"X-CSRFToken\":csrfToken}});navigate(\"/\");};if(loading)return/*#__PURE__*/_jsx(\"h3\",{style:{padding:\"20px\"},children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Nurse Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"}),data.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No triage requests found.\"}):data.map(item=>/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"15px\",border:\"1px solid #ccc\",padding:\"10px\",borderRadius:\"5px\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Symptoms:\"}),\" \",item.symptoms]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Blood Pressure:\"}),\" \",item.blood_pressure]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Heart Rate:\"}),\" \",item.heart_rate]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Temperature:\"}),\" \",item.temperature]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Risk:\"}),\" \",item.predicted_risk]})]},item.id))]});}export default NurseDashboard;","map":{"version":3,"names":["useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","getCookie","name","cookieValue","document","cookie","cookies","split","trim","startsWith","decodeURIComponent","substring","length","NurseDashboard","data","setData","loading","setLoading","navigate","fetch","credentials","then","res","ok","json","roleData","role","result","Array","isArray","catch","handleLogout","csrfToken","method","headers","style","padding","children","onClick","map","item","marginTop","border","borderRadius","symptoms","blood_pressure","heart_rate","temperature","predicted_risk","id"],"sources":["C:/Users/Praanesh MB/OneDrive/Documents/Kanini-Hackathon-master/frontend/src/pages/NurseDashboard.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== \"\") {\n    const cookies = document.cookie.split(\";\");\n    for (let cookie of cookies) {\n      cookie = cookie.trim();\n      if (cookie.startsWith(name + \"=\")) {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\nfunction NurseDashboard() {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  // Protect route\n  useEffect(() => {\n    fetch(\"http://192.168.18.207:8000/api/user-role/\", {\n      credentials: \"include\",\n    })\n      .then(res => {\n        if (!res.ok) navigate(\"/\");\n        return res.json();\n      })\n      .then(roleData => {\n        if (roleData.role !== \"nurse\") navigate(\"/\");\n      });\n  }, [navigate]);\n\n  // Load dashboard data\n  useEffect(() => {\n    fetch(\"http://192.168.18.207:8000/api/nurse-dashboard/\", {\n      credentials: \"include\",\n    })\n      .then(res => res.json())\n      .then(result => {\n        if (Array.isArray(result)) setData(result);\n        setLoading(false);\n      })\n      .catch(() => setLoading(false));\n  }, []);\n\n  const handleLogout = async () => {\n    const csrfToken = getCookie(\"csrftoken\");\n\n    await fetch(\"http://192.168.18.207:8000/api/logout/\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"X-CSRFToken\": csrfToken,\n      },\n    });\n\n    navigate(\"/\");\n  };\n\n  if (loading) return <h3 style={{ padding: \"20px\" }}>Loading...</h3>;\n\n  return (\n    <div style={{ padding: \"20px\" }}>\n      <h2>Nurse Dashboard</h2>\n      <button onClick={handleLogout}>Logout</button>\n\n      {data.length === 0 ? (\n        <p>No triage requests found.</p>\n      ) : (\n        data.map(item => (\n          <div key={item.id} style={{\n            marginTop: \"15px\",\n            border: \"1px solid #ccc\",\n            padding: \"10px\",\n            borderRadius: \"5px\"\n          }}>\n            <p><strong>Symptoms:</strong> {item.symptoms}</p>\n            <p><strong>Blood Pressure:</strong> {item.blood_pressure}</p>\n            <p><strong>Heart Rate:</strong> {item.heart_rate}</p>\n            <p><strong>Temperature:</strong> {item.temperature}</p>\n            <p><strong>Risk:</strong> {item.predicted_risk}</p>\n          </div>\n        ))\n      )}\n    </div>\n  );\n}\n\nexport default NurseDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}